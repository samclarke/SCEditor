(function(a){a.sceditor=function(I,v){var r=this;var w=a(I);var g=I;var M=null;var f=null;var F=null;var x=null;var q=null;var o=null;var A=false;var y=[];var D=null;var b=[];var s=null;var l=null;var H,n,p,J,K,j,h,i,e,L,m,d,B,u,t,c,C,k,z;r.commands={bold:{execCommand:"bold",tooltip:"Bold"},italic:{execCommand:"italic",tooltip:"Italic"},underline:{execCommand:"underline",tooltip:"Underline"},strike:{execCommand:"strikethrough",tooltip:"Strikethrough"},subscript:{execCommand:"subscript",tooltip:"Subscript"},superscript:{execCommand:"superscript",tooltip:"Superscript"},left:{execCommand:"justifyleft",tooltip:"Align left"},center:{execCommand:"justifycenter",tooltip:"Center"},right:{execCommand:"justifyright",tooltip:"Align right"},justify:{execCommand:"justifyfull",tooltip:"Justify"},font:{execFunction:function(O){var R=r.options.fonts.split(",");var Q=a("<span />");var N=function(S){r.execCommand("fontname",a(this).data("sceditor-font"));n();r.focus();S.preventDefault()};for(var P=0;P<R.length;P++){Q.append(a('<a class="sceditor-font-option" href="#"><font face="'+R[P]+'">'+R[P]+"</font></a>").data("sceditor-font",R[P]).click(N))}p(O,"font-picker",Q)},tooltip:"Font Name"},size:{execFunction:function(O){var Q=a("<span />");var N=function(R){r.execCommand("fontsize",a(this).data("sceditor-fontsize"));n();r.focus();R.preventDefault()};for(var P=1;P<=7;P++){Q.append(a('<a class="sceditor-fontsize-option" href="#"><font size="'+P+'">'+P+"</font></a>").data("sceditor-fontsize",P).click(N))}p(O,"fontsize-picker",Q)},tooltip:"Font Size"},color:{execFunction:function(P){var O={r:255,g:255,b:255};var U=a("<span />");var S=r.options.colors?r.options.colors.split("|"):new Array(21);var T=[];var W=0;for(var R=0;R<S.length;++R){var N=(typeof S[R]!="undefined")?S[R].split(","):new Array(21);T[W++]='<div class="sceditor-color-column">';for(var V=0;V<N.length;++V){var Q=(typeof N[V]!="undefined")?N[V]:"#"+O.r.toString(16)+O.g.toString(16)+O.b.toString(16);T[W++]='<a href="#" class="sceditor-color-option" style="background-color: '+Q+'" data-color="'+Q+'"></a>';if(V%5===0){O={r:O.r,g:O.g-51,b:255}}else{O={r:O.r,g:O.g,b:O.b-51}}}T[W++]="</div>";if(R%5===0){O={r:O.r-51,g:255,b:255}}else{O={r:O.r,g:255,b:255}}}U.append(T.join("")).find("a").click(function(X){r.execCommand("forecolor",a(this).attr("data-color"));n();r.focus();X.preventDefault()});p(P,"color-picker",U)},tooltip:"Font Color"},removeformat:{execCommand:"removeformat",tooltip:"Remove Formatting"},cut:{execCommand:"cut",tooltip:"Cut",errorMessage:"Your browser dose not allow the cut command. Please use the keyboard shortcut Ctrl/Cmd-X"},copy:{execCommand:"copy",tooltip:"Copy",errorMessage:"Your browser dose not allow the copy command. Please use the keyboard shortcut Ctrl/Cmd-C"},paste:{execCommand:"paste",tooltip:"Paste",errorMessage:"Your browser dose not allow the paste command. Please use the keyboard shortcut Ctrl/Cmd-V"},pastetext:{execFunction:function(N){var O=a('<form><div><label for="txt">Paste your text inside the followingbox:</label> <textarea cols="20" rows="7" id="txt"></textarea></div></form>').submit(function(){return false});O.append(a('<div><input type="button" class="button" value="Insert" /></div>').click(function(P){J(a(this).parent("form").find("#txt").val());n();r.focus();P.preventDefault()}));p(N,"pastetext",O)},tooltip:"Paste Text"},bulletlist:{execCommand:"insertunorderedlist",tooltip:"Bullet list"},orderedlist:{execCommand:"insertorderedlist",tooltip:"Numbered list"},undo:{execCommand:"undo",tooltip:"Undo"},redo:{execCommand:"redo",tooltip:"Redo"},table:{execFunction:function(N){var O=a('<form><div><label for="rows">Rows:</label><input type="text" id="rows" value="2" /></div><div><label for="cols">Cols:</label><input type="text" id="cols" value="2" /></div></form>').submit(function(){return false});O.append(a('<div><input type="button" class="button" value="Insert" /></div>').click(function(T){var R=a(this).parent("form").find("#rows").val()-0;var S=a(this).parent("form").find("#cols").val()-0;var Q="<table>";for(var U=0;U<R;U++){Q+="<tr>";for(var P=0;P<S;P++){if(a.browser.msie){Q+="<td></td>"}else{Q+='<td><br class="sceditor-ignore" /></td>'}}Q+="</tr>"}Q+="</table>";K(Q);n();r.focus();T.preventDefault()}));p(N,"inserttable",O)},tooltip:"Insert a table"},horizontalrule:{execCommand:"inserthorizontalrule",tooltip:"Insert a horizontal rule"},code:{execFunction:function(N){K("<code>","<br /></code>")},tooltip:"Code"},image:{execFunction:function(N){var O=a('<form><div><label for="link">URL:</label> <input type="text" id="image" value="http://" /></div><div><label for="width">Width (optional):</label> <input type="text" id="width" size="2" /></div><div><label for="height">Height (optional):</label> <input type="text" id="height" size="2" /></div></form>').submit(function(){return false});O.append(a('<div><input type="button" class="button" value="Insert" /></div>').click(function(T){var Q=a(this).parent("form");var U=Q.find("#image").val();var R="";var S,P;if((S=Q.find("#width").val())!==""){R+=' width="'+S+'"'}if((P=Q.find("#height").val())!==""){R+=' height="'+P+'"'}if(U!==""&&U!=="http://"){K("<img"+R+' src="'+U+'" />')}n();r.focus();T.preventDefault()}));p(N,"insertimage",O)},tooltip:"Insert an image"},email:{execFunction:function(N){var O=a('<form><div><label for="email">E-mail:</label> <input type="text" id="email" value="" /></div></form>').submit(function(){return false});O.append(a('<div><input type="button" class="button" value="Insert" /></div>').click(function(P){var Q=a(this).parent("form").find("#email").val();if(Q!==""){r.focus();if(h().type=="None"||h().type=="Caret"){K('<a href="mailto:'+Q+'">'+Q+"</a>")}else{r.execCommand("createlink","mailto:"+Q)}}n();r.focus();P.preventDefault()}));p(N,"insertemail",O)},tooltip:"Insert an email"},link:{execFunction:function(N){var O=a('<form><div><label for="link">URL:</label> <input type="text" id="link" value="http://" /></div></form>').submit(function(){return false});O.append(a('<div><input type="button" class="button" value="Insert" /></div>').click(function(P){var Q=a(this).parent("form").find("#link").val();if(Q!==""&&Q!=="http://"){r.focus();if(h().type=="None"||h().type=="Caret"){K('<a href="'+Q+'">'+Q+"</a>")}else{r.execCommand("createlink",Q)}}n();r.focus();P.preventDefault()}));p(N,"insertlink",O)},tooltip:"Insert a link"},unlink:{execCommand:"unlink",tooltip:"Unlink"},quote:{execFunction:function(N){K("<blockquote>","<br /></blockquote>")},tooltip:"Insert a Quote"},emoticon:{execFunction:function(P){var R=a("<div />");var N=a("<div />");var O=function(T,S){N.append(a("<img />",{src:S,alt:T,click:function(U){K('<img src="'+a(this).attr("src")+'" data-sceditor-emoticon="'+a(this).attr("alt")+'" />');n();r.focus();U.preventDefault()}}));if(N.children().length>3){R.append(N);N=a("<div />")}};a.each(r.options.emoticons.dropdown,O);if(N.children().length>0){R.append(N)}if(typeof r.options.emoticons.more!=="undefined"){var Q=a('<a class="sceditor-more">More</a>').click(function(){var S=a.extend({},r.options.emoticons.dropdown,r.options.emoticons.more);R=a("<div />");N=a("<div />");a.each(S,O);if(N.children().length>0){R.append(N)}p(P,"insertemoticon",R)});R.append(Q)}p(P,"insertemoticon",R)},keyPress:function(P){var N=null,Q=-1;if(x.contentWindow&&x.contentWindow.getSelection){N=x.contentWindow.getSelection().getRangeAt(0)}if(N===null||!N.startContainer){return}if(l===null){l=a.extend({},r.options.emoticons.more,r.options.emoticons.dropdown,r.options.emoticons.hidden)}if(s===null){s=0;a.each(l,function(S,R){if(S.length>s){s=S.length}})}var O=N.startContainer.textContent.substr(0,N.startOffset)+String.fromCharCode(P.which)+N.startContainer.textContent.substr(N.startOffset,s);a.each(l,function(S,R){if((Q=O.indexOf(S))>-1){N=N.cloneRange();N.setStart(N.startContainer,Q);N.setEnd(N.startContainer,Q+(S.length-1));N.deleteContents();var T=z().createElement("div");T.innerHTML='<img src="'+R+'" data-sceditor-emoticon="'+S+'" />';T=T.children[0];N.insertNode(T);N=N.cloneRange();N.setStartAfter(T);x.contentWindow.getSelection().removeAllRanges();x.contentWindow.getSelection().addRange(N);P.preventDefault();P.stopPropagation();return false}})},tooltip:"Insert an emoticon"},youtube:{execFunction:function(N){var O=a('<form><div><label for="link">Video URL:</label> <input type="text" id="link" value="http://" /></div></form>').submit(function(){return false});O.append(a('<div><input type="button" class="button" value="Insert" /></div>').click(function(P){var Q=a(this).parent("form").find("#link").val();if(Q!==""&&Q!=="http://"){Q=Q.replace(/^[^v]+v.(.{11}).*/,"$1");K('<iframe width="560" height="315" src="http://www.youtube.com/embed/'+Q+'" data-youtube-id="'+Q+'" frameborder="0" allowfullscreen></iframe>')}n();r.focus();P.preventDefault()}));p(N,"insertlink",O)},tooltip:"Insert a YouTube video"},date:{execFunction:function(P){var O=new Date();var Q=O.getYear();var R=O.getMonth();var N=O.getDate();if(Q<2000){Q=1900+Q}if(R<10){R="0"+R}if(N<10){N="0"+N}K("<span>"+Q+"-"+R+"-"+N+"</span>")},tooltip:"Insert current date"},time:{execFunction:function(P){var O=new Date();var N=O.getHours();var R=O.getMinutes();var Q=O.getSeconds();if(N<10){N="0"+N}if(R<10){R="0"+R}if(Q<10){Q="0"+Q}K("<span>"+N+":"+R+":"+Q+"</span>")},tooltip:"Insert current time"},print:{execCommand:"print",tooltip:"Print"},source:{execFunction:function(N){r.toggleTextMode()},tooltip:"View source"}};H=function(){w.data("sceditor",r);r.options=a.extend({},a.sceditor.defaultOptions,v);if(r.options.height!==null){w.height(r.options.height)}if(r.options.width!==null){w.width(r.options.width)}M=a("<div />",{"class":"sceditor-container",height:w.outerHeight(),width:w.outerWidth()});w.after(M);u();B();t();if(r.options.resizeEnabled){c()}w.parents("form").submit(r.updateFormTextareaValue);a(document).click(C);var N=w.hide().val();if(r.options.getTextHandler){N=r.options.getTextHandler(N)}r.setWysiwygEditorValue(N);k()};B=function(){q=a("<textarea></textarea>").hide();F=a("<iframe></iframe>",{frameborder:0});if(window.location.protocol==="https:"){F.attr("src","javascript:false")}M.append(F).append(q);x=F[0];E(w.height());G(w.width());z().designMode="On";z().open();z().write('<html><head><link rel="stylesheet" type="text/css" href="'+r.options.style+'" /></head><body></body></html>');z().close();a(z()).find("body").keypress(m);a(z()).keypress(m);a(z()).mousedown(d);a(z()).bind("beforedeactivate keypress",L)};u=function(){var P=function(U){e(a(this),r.commands[a(this).data("sceditor-command")]);U.preventDefault()};f=a('<div class="sceditor-toolbar" />');var O=r.options.toolbar.split("|");for(var R=0;R<O.length;R++){var T=a('<div class="sceditor-group" />');var S=O[R].split(",");for(var N=0;N<S.length;N++){if(!r.commands.hasOwnProperty(S[N])){continue}var Q=a('<a class="sceditor-button sceditor-button-'+S[N]+' " unselectable="on"><div /></a>');if(r.commands[S[N]].hasOwnProperty("tooltip")){Q.attr("title",r.commands[S[N]].tooltip)}Q.data("sceditor-command",S[N]);Q.click(P);T.append(Q)}f.append(T)}if(r.options.toolbarContainer===null){M.append(f)}else{a(r.options.toolbarContainer).append(f)}};t=function(){a.each(r.commands,function(O,N){if(typeof N.keyPress!="undefined"){y.push(N.keyPress)}})};var G=function(N){M.width(N);F.width(N);F.width(N+(N-F.outerWidth(true)));q.width(N);q.width(N+(N-q.outerWidth(true)))};var E=function(N){M.height(N);N=N-(r.options.toolbarContainer===null?f.outerHeight():0);F.height(N);F.height(N+(N-F.outerHeight(true)));q.height(N);q.height(N+(N-q.outerHeight(true)))};c=function(){var P=a('<div class="sceditor-grip" />'),aa=a('<div class="sceditor-resize-cover" />'),S=0,Q=0,R=0,Y=0,X=M.width(),Z=M.height(),V=false,W,U,N,T,O;W=(r.options.resizeMinHeight==null?Z/2:r.options.resizeMinHeight);U=(r.options.resizeMaxHeight==null?Z*2:r.options.resizeMaxHeight);N=(r.options.resizeMinWidth==null?X/2:r.options.resizeMinWidth);T=(r.options.resizeMaxWidth==null?X*2:r.options.resizeMaxWidth);O=function(ad){var ab=Y+(ad.pageY-Q);var ac=R+(ad.pageX-S);if(ac>=N&&(N<0||ac<=T)){G(ac)}if(ab>=W&&(U<0||ab<=U)){E(ab)}ad.preventDefault()};M.append(P);M.append(aa.hide());P.mousedown(function(ab){S=ab.pageX;Q=ab.pageY;R=M.width();Y=M.height();V=true;aa.show();a(document).bind("mousemove",O);ab.preventDefault()});a(document).mouseup(function(ab){if(!V){return}V=false;aa.hide();a(document).unbind("mousemove",O);ab.preventDefault()})};k=function(){var N=a.extend({},r.options.emoticons.more,r.options.emoticons.dropdown,r.options.emoticons.hidden);a.each(N,function(Q,O){var P=document.createElement("img");P.src=O;b.push(P)})};p=function(O,Q,P){if(o!==null){n()}var N=O.position();o=a('<div class="sceditor-dropdown sceditor-'+Q+'" />').css({top:N.top,left:N.left}).append(P);M.after(o);A=true;o.click(function(R){R.stopPropagation()})};C=function(){if(!A){n()}A=false};n=function(){if(o!==null){o.remove();o=null}};z=function(){if(x.contentDocument){return x.contentDocument}if(x.contentWindow&&x.contentWindow.document){return x.contentWindow.document}if(x.document){return x.document}return null};K=function(O,Q){r.focus();if(a(j()).is("code")||a(j()).parents("code").length!==0){return}if(typeof Q!=="undefined"){O=O+r.getWysiwygSelectedHtml()+Q}if(z().getSelection){var N=h();var P=z().createElement("div");P.innerHTML=O;P=P.children[0];N.deleteContents();N.insertNode(P);N=N.cloneRange();N.setStartAfter(P);x.contentWindow.getSelection().removeAllRanges();x.contentWindow.getSelection().addRange(N)}else{if(z().selection&&z().selection.createRange){z().selection.createRange().pasteHTML(O)}else{r.execCommand("insertHtml",O)}}D=null};J=function(N){N=N.replace(/&/g,"&amp;");N=N.replace(/</g,"&lt;");N=N.replace(/>/g,"&gt;");N=N.replace(/ /g,"&nbsp;");N=N.replace(/\r\n|\r/g,"\n");N=N.replace(/\n/g,"<br />");K(N)};h=function(){var N;if(x.contentWindow&&x.contentWindow.getSelection){N=x.contentWindow.getSelection()}else{if(z().selection){N=z().selection}}if(N.getRangeAt){return N.getRangeAt(0)}else{if(N.createRange){return N.createRange()}}return null};r.getWysiwygSelectedHtml=function(){var O=h();if(O===null){return""}if(document.selection&&document.selection.createRange){if(typeof O.htmlText!="undefined"){return O.htmlText}else{if(O.length>=1){return O.item(0).outerHTML}}}if(window.XMLSerializer){var N="";a(O.cloneContents().childNodes).each(function(){N+=new XMLSerializer().serializeToString(this)});return N}};j=function(){var N=h();if(N===null){return null}if(window.getSelection&&typeof N.commonAncestorContainer!=="undefined"){return N.commonAncestorContainer}if(document.selection&&document.selection.createRange){return N.parentElement()}};r.getWysiwygEditorValue=function(O){var N=F.contents().find("body").html();if(O!==false&&r.options.getHtmlHandler){N=r.options.getHtmlHandler(N,F.contents().find("body"))}return N};r.getTextareaValue=function(N){var O=q.val();if(N!==false&&r.options.getTextHandler){O=r.options.getTextHandler(O)}return O};r.setWysiwygEditorValue=function(N){z().body.innerHTML=i(N)};r.setTextareaValue=function(N){q.val(N)};r.updateFormTextareaValue=function(){if(q.is(":visible")){w.val(r.getTextareaValue(false))}else{w.val(r.getWysiwygEditorValue())}};i=function(N){var O=a.extend({},r.options.emoticons.more,r.options.emoticons.dropdown,r.options.emoticons.hidden);a.each(O,function(Q,P){var R=Q.replace(/[\$\?\[\]\.\*\(\)\|]/g,"\\$&").replace("<","&lt;").replace(">","&gt;")+"(?=([^\\<\\>]*?<(?!/code)|[^\\<\\>]*?$))";N=N.replace(new RegExp(R,"g"),'<img src="'+P+'" data-sceditor-emoticon="'+Q+'" />')});return N};r.toggleTextMode=function(){if(q.is(":visible")){r.setWysiwygEditorValue(r.getTextareaValue())}else{r.setTextareaValue(r.getWysiwygEditorValue())}D=null;q.toggle();F.toggle()};e=function(N,O){if(O.hasOwnProperty("execFunction")){O.execFunction(N)}else{r.execCommand(O.execCommand,O.hasOwnProperty("execParam")?O.execParam:null)}};r.focus=function(){x.contentWindow.focus();if(D!==null){if(window.document.createRange){window.getSelection().addRange(D)}else{if(window.document.selection){D.select()}}}};L=function(){if(!a.browser.msie){return}D=h()};r.execCommand=function(Q,P){var N=false;r.focus();if(a(j()).is("code")||a(j()).parents("code").length!==0){return}if(z()){try{N=z().execCommand(Q,false,P)}catch(O){}}if(!N&&typeof r.commands[Q]!="undefined"&&typeof r.commands[Q].errorMessage!="undefined"){alert(r.commands[Q].errorMessage)}};m=function(O){n();if(a(j()).is("code")||a(j()).parents("code").length!==0){return}var N=y.length;while(N--){y[N](O)}};d=function(N){n()};H()};a.sceditor.defaultOptions={toolbar:"bold,italic,underline,strike,subscript,superscript|left,center,right,justify|font,size,color,removeformat|cut,copy,paste,pastetext|bulletlist,orderedlist|undo,redo|table|code,quote|horizontalrule,image,email,link,unlink|emoticon,youtube,date,time|print,source",style:"jquery.sceditor.default.css",fonts:"Arial,Arial Black,Comic Sans MS,Courier New,Georgia,Impact,Sans-serif,Serif,Times New Roman,Trebuchet MS,Verdana",colors:null,emoticons:{dropdown:{":)":"emoticons/smile.png",":angel:":"emoticons/angel.png",":angry:":"emoticons/angry.png","8-)":"emoticons/cool.png",":'(":"emoticons/cwy.png",":ermm:":"emoticons/ermm.png",":D":"emoticons/grin.png","<3":"emoticons/heart.png",":(":"emoticons/sad.png",":O":"emoticons/shocked.png",":P":"emoticons/tongue.png",";)":"emoticons/wink.png"},more:{":alien:":"emoticons/alien.png",":blink:":"emoticons/blink.png",":blush:":"emoticons/blush.png",":cheerful:":"emoticons/cheerful.png",":devil:":"emoticons/devil.png",":dizzy:":"emoticons/dizzy.png",":getlost:":"emoticons/getlost.png",":happy:":"emoticons/happy.png",":kissing:":"emoticons/kissing.png",":ninja:":"emoticons/ninja.png",":pinch:":"emoticons/pinch.png",":pouty:":"emoticons/pouty.png",":sick:":"emoticons/sick.png",":sideways:":"emoticons/sideways.png",":silly:":"emoticons/silly.png",":sleeping:":"emoticons/sleeping.png",":unsure:":"emoticons/unsure.png",":woot:":"emoticons/w00t.png",":wassat:":"emoticons/wassat.png"},hidden:{":whistling:":"emoticons/whistling.png",":love:":"emoticons/wub.png"}},width:null,height:null,resizeEnabled:true,resizeMinWidth:null,resizeMinHeight:null,resizeMaxHeight:null,resizeMaxWidth:null,getHtmlHandler:null,getTextHandler:null,toolbarContainer:null};a.fn.sceditor=function(b){return this.each(function(){(new a.sceditor(this,b))})}})(jQuery);(function(a){a.sceditorBBCodePlugin=function(e,m){var c=this;var l,g,h,i,d,k,f;c.bbcodes={b:{styles:{"font-weight":["bold","bolder","401","700","800","900"]},format:"[b]{0}[/b]",html:"<strong>{0}</strong>"},i:{styles:{"font-style":["italic","oblique"]},format:"[i]{0}[/i]",html:"<em>{0}</em>"},u:{styles:{"text-decoration":["underline"]},format:"[u]{0}[/u]",html:"<u>{0}</u>"},s:{styles:{"text-decoration":["line-through"]},format:"[s]{0}[/s]",html:"<s>{0}</s>"},sub:{tags:{sub:null},format:"[sub]{0}[/sub]",html:"<sub>{0}</sub>"},sup:{tags:{sup:null},format:"[sup]{0}[/sup]",html:"<sup>{0}</sup>"},left:{styles:{"text-align":["left"]},format:"[left]{0}[/left]",html:'<div style="text-align: left">{0}</div>'},center:{styles:{"text-align":["center"]},format:"[center]{0}[/center]",html:'<div style="text-align: center">{0}</div>'},right:{styles:{"text-align":["right"]},format:"[right]{0}[/right]",html:'<div style="text-align: right">{0}</div>'},justify:{styles:{"text-align":["justify"]},format:"[justify]{0}[/justify]",html:'<div style="text-align: justify">{0}</div>'},font:{styles:{"font-family":null},format:function(n,o){if(n.css("font-family")==c.options.defaultFont){return o}return"[font="+f(n.css("font-family"))+"]"+o+"[/font]"},html:function(o,n,p){return'<font face="'+n.defaultAttr+'">'+p+"</font>"}},size:{styles:{"font-size":null},format:function(o,p){var q=o.css("fontSize");var n=1;if(q==c.options.defaultSize){return p}if(q.indexOf("px")>-1){q=q.replace("px","")-0;if(q>12){n=2}if(q>15){n=3}if(q>17){n=4}if(q>23){n=5}if(q>31){n=6}if(q>47){n=7}}else{n=q}return"[size="+n+"]"+p+"[/size]"},html:function(o,n,p){return'<font size="'+n.defaultAttr+'">'+p+"</font>"}},color:{styles:{color:null},format:function(o,p){var n=g(o.css("color"));if(n==c.options.defaultColor){return p}return"[color="+n+"]"+p+"[/color]"},html:function(o,n,p){return'<font color="'+n.defaultAttr+'">'+p+"</font>"}},ul:{tags:{ul:null},format:"[ul]{0}[/ul]",html:"<ul>{0}</ul>"},list:{html:"<ul>{0}</ul>"},ol:{tags:{ol:null},format:"[ol]{0}[/ol]",html:"<ol>{0}</ol>"},li:{tags:{li:null},format:"[li]{0}[/li]",html:"<li>{0}</li>"},"*":{html:"<li>{0}</li>"},table:{tags:{table:null},format:"[table]{0}[/table]",html:"<table>{0}</table>"},tr:{tags:{tr:null},format:"[tr]{0}[/tr]",html:"<tr>{0}</tr>"},th:{tags:{th:null},format:"[th]{0}[/th]",html:"<th>{0}</th>"},td:{tags:{td:null},format:"[td]{0}[/td]",html:'<td>{0}<br class="sceditor-ignore" /></td>'},emoticon:{tags:{img:{src:null,"data-sceditor-emoticon":null}},format:function(n,o){return n.attr("data-sceditor-emoticon")+o},html:"{0}"},horizontalrule:{tags:{hr:null},format:"[hr]{0}",html:"<hr />"},img:{tags:{img:{src:null}},format:function(n,o){if(typeof n.attr("data-sceditor-emoticon")!="undefined"){return o}var p="="+a(n).width()+"x"+a(n).height();return"[img"+p+"]"+n.attr("src")+"[/img]"},html:function(o,n,p){var r="";if(typeof n.width!="undefined"){r+=' width="'+n.width+'"'}if(typeof n.height!="undefined"){r+=' height="'+n.height+'"'}if(typeof n.defaultAttr!=="undefined"){var q=n.defaultAttr.split(/x/i);r=' width="'+q[0]+'" height="'+(q.length===2?q[1]:q[0])+'"'}return"<img "+r+' src="'+p+'" />'}},url:{tags:{a:{href:null}},format:function(n,o){if(n.attr("href").substr(0,7)=="mailto:"){return"[email="+n.attr("href").substr(7)+"]"+o+"[/email]"}return"[url="+encodeURI(n.attr("href")).replace("=","%3D")+"]"+o+"[/url]"},html:function(o,n,p){if(typeof n.defaultAttr==="undefined"){n.defaultAttr=p}return'<a href="'+n.defaultAttr+'">'+p+"</a>"}},email:{html:function(o,n,p){if(typeof n.defaultAttr==="undefined"){n.defaultAttr=p}return'<a href="mailto:'+n.defaultAttr+'">'+p+"</a>"}},quote:{tags:{blockquote:null},format:function(o,p){var n="";if(a(o).children("cite:first").length==1){n="="+a(o).children("cite:first").text();p="";a(o).children("cite:first").remove();a(o).contents().each(function(){p+=k(a(this))})}return"[quote"+n+"]"+p+"[/quote]"},html:function(o,n,p){if(typeof n.defaultAttr!=="undefined"){p="<cite>"+n.defaultAttr+"</cite>"+p}return"<blockquote>"+p+"</blockquote>"}},code:{tags:{code:null},format:"[code]{0}[/code]",html:"<code>{0}</code>"},youtube:{tags:{iframe:{"data-youtube-id":null}},format:function(n,o){if(!n.attr("data-youtube-id")){return o}return"[youtube]"+n.attr("data-youtube-id")+"[/youtube]"},html:'<iframe width="560" height="315" src="http://www.youtube.com/embed/{0}" data-youtube-id="{0}" frameborder="0" allowfullscreen></iframe>'}};var j={};var b={};l=function(){c.options=a.extend({},a.sceditor.defaultOptions,a.sceditorBBCodePlugin.defaultOptions,m);c.buildBbcodeCache();(new a.sceditor(e,a.extend({},c.options,{getHtmlHandler:c.getHtmlHandler,getTextHandler:c.getTextHandler})))};g=function(p){var o;function n(q){q=parseInt(q,10);if(isNaN(q)){return"00"}q=Math.max(0,Math.min(q,255)).toString(16);return q.length<2?"0"+q:q}if((o=p.match(/rgb\((\d+),\s*?(\d+),\s*?(\d+)\)/i))){return"#"+n(o[1])+n(o[2]-0)+n(o[3]-0)}return p};c.buildBbcodeCache=function(){a.each(c.bbcodes,function(n,o){if(typeof c.bbcodes[n].tags!=="undefined"){a.each(c.bbcodes[n].tags,function(p,q){j[p]=(j[p]||{});j[p][n]=q})}if(typeof c.bbcodes[n].styles!=="undefined"){a.each(c.bbcodes[n].styles,function(q,p){b[q]=(b[q]||{});b[q][n]=p})}})};h=function(o,p){var n;a.each(b,function(r,q){if(o.get(0).nodeName.toLowerCase()==="a"&&(r==="color"||r==="text-decoration")){return}else{if(o.get(0).nodeName.toLowerCase()==="code"&&(r==="font-family")){return}}n=o.css(r);if(o.parent().css(r)==n){return}a.each(q,function(t,s){if(s===null||a.inArray(n.toString(),s)>-1){if(a.isFunction(c.bbcodes[t].format)){p=c.bbcodes[t].format(o,p)}else{p=d(c.bbcodes[t].format,p)}}})});return p};i=function(o,p){var n=o.get(0).nodeName.toLowerCase();if(typeof j[n]!=="undefined"){a.each(j[n],function(r,s){if(s!==null){var q=false;a.each(s,function(u,t){if(typeof o.attr(u)==="undefined"){return}if(t!==null&&a.inArray(o.attr(u),t)<0){return}q=true;return false});if(!q){return}}if(a.isFunction(c.bbcodes[r].format)){p=c.bbcodes[r].format(o,p)}else{p=d(c.bbcodes[r].format,p)}})}if(n==="br"||n==="div"||n==="p"){p+="\n"}return p};d=function(){var n=arguments;return n[0].replace(/\{(\d+)\}/g,function(p,o){return typeof n[0-o+1]!="undefined"?n[0-o+1]:"{"+o+"}"})};f=function(n){return n.replace(/^["']+/,"").replace(/["']+$/,"")};c.getHtmlHandler=function(n,o){return k(a(o))};k=function(o){var n="";if(typeof o.get(0)==="undefined"){return""}if(o.get(0).nodeName.toLowerCase()!=="iframe"){if(o.get(0).nodeType===3){return o.get(0).nodeValue}else{if(o.is("code")){n=o.text()}else{if(o.contents().length>0){a.each(o.contents(),function(){n+=k(a(this))})}}}}if(!o.is("code")){n=h(o,n)}n=i(o,n);return n};c.getTextHandler=function(r){var q=/\[([^\[\s=]*?)(?:([^\[]*?))?\]((?:[\s\S(?!=\[\\\1)](?!\[\1))*?)\[\/(\1)\]/g;var o=/(\S+)=((?:(?:(["'])(?:\\\3|[^\3])*?\3))|(?:[^'"\s]+))/g;var n;var p=function(x,t,s,v){var u={};if(typeof s!=="undefined"){var w;s=a.trim(s);if(s.charAt(0)=="="&&(s.split("=").length-1)<=1){u.defaultAttr=f(s.substr(1))}else{if(s.charAt(0)==="="){s="defaultAttr"+s}while((w=o.exec(s))){u[w[1].toLowerCase()]=f(w[2])}}}if(typeof c.bbcodes[t]==="undefined"){return x}if(typeof c.bbcodes[t].html==="function"){return c.bbcodes[t].html(t,u,v)}else{return d(c.bbcodes[t].html,v)}};r=r.replace(/&/g,"&amp;");r=r.replace(/</g,"&lt;");r=r.replace(/>/g,"&gt;");r=r.replace(/\r/g,"");r=r.replace(/(\[\/?(?:left|center|right|justify)\])\n/g,"$1");r=r.replace(/\n/g,"<br />");while(r!==n){n=r;r=r.replace(q,p)}r=r.replace(/\[hr\]/gi,"<hr>");return r.replace(/ {2}(?=([^<\>]*?<|[^<\>]*?$))/g," &nbsp;")};l()};a.sceditorBBCodePlugin.defaultOptions={defaultSize:13,defaultColor:"#111111",defaultFont:"Verdana, Arial, Helvetica, sans-serif"};a.fn.sceditorBBCodePlugin=function(b){return this.each(function(){(new a.sceditorBBCodePlugin(this,b))})}})(jQuery);